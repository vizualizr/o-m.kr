---
import { getCollection } from "astro:content";
import SwissLayout from "@layouts/swiss/SwissLayout.astro";
import Header from "@layouts/swiss/Header.astro";
import Patchwork from "@components/swiss/Patchwork.astro";
import { gridMapper12 as gridMapper } from "@utils/grid-mapper";

const allArticles = await getCollection("articles");
const { articles: mappedArticles, rowHeights } = gridMapper(allArticles);

console.log(
  `[Index] Total rows: ${rowHeights.length}, Total articles: ${mappedArticles.length}`,
);
---

<SwissLayout title="o-m.kr landing page">
  <!-- 배경 가이드라인 (옵션) -->
  <div class="fixed inset-0 pointer-events-none z-0">
    <div class="h-full w-full mx-auto border-x border-outline/20 relative">
    </div>
  </div>

  <div class="patchwork-grid-wrapper relative z-10 w-full">
    <section id="main-grid" class="patchwork-grid">
      {mappedArticles.map((article) => <Patchwork article={article} />)}
    </section>
  </div>

  <footer
    class="w-full max-w-[1400px] border-t border-outline py-24 px-8 mt-auto mx-auto relative z-10"
  >
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-16">
      <div class="col-span-1 md:col-span-2">
        <h2 class="korean-condensed-block text-5xl text-base-content mb-8">
          O-M.KR
        </h2>
        <p
          class="text-[10px] font-bold uppercase tracking-[0.4em] text-primary/40"
        >
          스위스 취리히 • 2024년 설립<br />데이터 엄밀성을 통한 사회적 임팩트
        </p>
      </div>
      <div>
        <span
          class="text-[9px] font-bold uppercase tracking-[0.2em] text-primary/30 block mb-6"
          >디렉토리</span
        >
        <nav
          class="flex flex-col gap-4 uppercase text-[10px] font-bold tracking-widest text-primary/70"
        >
          <a class="hover:text-primary transition-colors" href="#">저장소</a>
          <a class="hover:text-primary transition-colors" href="#"
            >임팩트 보고서</a
          >
          <a class="hover:text-primary transition-colors" href="#">윤리 강령</a>
        </nav>
      </div>
      <div>
        <span
          class="text-[9px] font-bold uppercase tracking-[0.2em] text-primary/30 block mb-6"
          >소셜</span
        >
        <div class="flex gap-6">
          <span
            class="material-symbols-outlined text-base-content cursor-pointer hover:opacity-50 transition-opacity"
            >alternate_email</span
          >
          <span
            class="material-symbols-outlined text-base-content cursor-pointer hover:opacity-50 transition-opacity"
            >rss_feed</span
          >
          <span
            class="material-symbols-outlined text-base-content cursor-pointer hover:opacity-50 transition-opacity"
            >terminal</span
          >
        </div>
      </div>
    </div>
    <div
      class="mt-24 pt-8 border-t border-outline/30 flex justify-between items-center text-[9px] font-bold uppercase tracking-[0.3em] text-primary/30"
    >
      <span>© 2024 o-m.kr</span>
      <span>개인정보 처리방침 및 거버넌스</span>
    </div>
  </footer>
</SwissLayout>
