# CMS 파이프라인 문서화 및 스크립트 구조 정리 계획

## 목적
Google Sheets CMS 파이프라인의 데이터 흐름을 명확히 기록하여 사용자가 전체 구조를 쉽게 이해하고 잊지 않도록 하며, 모호한 폴더 구조를 정리하고 이를 [development-rules.md](file:///d:/yonggeun/porter/git/o-m.kr/production/.agent/rules/development-rules.md)에 반영합니다.

## 제안 사항
1. **데이터 플로우 문서화**: [development-rules.md](file:///d:/yonggeun/porter/git/o-m.kr/production/.agent/rules/development-rules.md) 내에 Mermaid 다이어그램을 포함한 "CMS Pipeline & Data Flow" 섹션을 추가합니다.
2. **폴더 구조 정리**: 
   - `scripts/` (Root): 빌드 타임이나 외부 도구로 실행되는 Pure Node.js 스크립트 (Astro 번들링 제외).
   - `src/scripts/`: 브라우저에서 실행되는 클라이언트 측 스크립트.
   - `src/utils/`: 컴포넌트 내에서 공유되는 헬퍼 함수.
   - 현재 `fetch-data.js`와 `sync-to-sheets.js`는 Root `scripts/`에 유지하되, `development-rules.md`의 구조 정의에 이를 명시하겠습니다.

## 상세 변경 내용

### 1. [development-rules.md](file:///d:/yonggeun/porter/git/o-m.kr/production/.agent/rules/development-rules.md)
- `Project Structure` 섹션에 `scripts/` 폴더 역할 추가.
- `Data Architecture` 섹션 하위에 `CMS Pipeline & Data Flow` 상세 내용(Mermaid, 파일별 역할) 추가.
  - `scripts/fetch-data.js`: Sheets -> JSON (Build-time)
  - `src/content.config.ts`: JSON + MDX -> Collection (Astro internal)
  - `scripts/sync-to-sheets.js`: Local MDX -> Sheets (Admin tool)

### 2. 스크립트 위치 결정
- 사용자께서 원하신다면 `scripts/`를 `src/scripts/build/` 등으로 옮길 수도 있으나, 프로젝트 루트의 `scripts/`가 가장 직관적인 업계 관행입니다. 그대로 유지하고 문서에 확실히 박아두는 방향을 제안합니다.

## 검토 요청
- 위 폴더 구분(Root scripts vs src/scripts) 및 `development-rules.md`에 통합 기록하는 방식이 괜찮으신지 확인 부탁드립니다.
